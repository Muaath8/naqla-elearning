:root{
  --bg:#0b1220; --panel:#0f172a; --card:#111827; --text:#e7eef7; --muted:#9fb0c7;
  --brand:#22c55e; --brand2:#06b6d4; --ring:rgba(34,197,94,.35);
  --border: rgba(148,163,184,.22); --radius:18px; --shadow: 0 10px 30px rgba(3,7,18,.35);
}
@media (prefers-color-scheme: light){
  :root{ --bg:#f6f7fb; --panel:#ffffff; --card:#ffffff; --text:#0b1220; --muted:#495a73; --shadow:0 8px 24px rgba(15,23,42,.08); --border: rgba(15,23,42,.12);} 
}
[data-theme="light"]{ --bg:#f6f7fb; --panel:#ffffff; --card:#ffffff; --text:#0b1220; --muted:#495a73; --shadow:0 8px 24px rgba(15,23,42,.08); --border: rgba(15,23,42,.12);} 

*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0; background:
    radial-gradient(1200px 600px at 80% -10%, rgba(6,182,212,.10), transparent 60%),
    radial-gradient(900px 500px at 0% 0%, rgba(34,197,94,.12), transparent 60%),
    var(--bg);
  color:var(--text);
  font:16px/1.7 "Tajawal", system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
  -webkit-font-smoothing: antialiased; -moz-osx-font-smoothing: grayscale;
}

.container{max-width:1200px; margin-inline:auto; padding:24px}

header{position:sticky; top:0; z-index:40; backdrop-filter:saturate(130%) blur(8px)}
.nav{display:flex; align-items:center; justify-content:space-between; gap:16px; padding:14px 18px; border-radius:calc(var(--radius) + 6px); background:rgba(17,24,39,.65); border:1px solid var(--border)}
.brand{display:flex; align-items:center; gap:12px; text-decoration:none; color:inherit}
.logo{inline-size:40px; block-size:40px; border-radius:12px; background:conic-gradient(from 210deg, var(--brand), var(--brand2)); box-shadow:inset 0 0 0 3px rgba(255,255,255,.14)}
.brand-title{font-weight:900; letter-spacing:.2px}
.actions{display:flex; gap:10px; align-items:center}

.btn{cursor:pointer; border:none; border-radius:12px; padding:10px 14px; background:var(--brand); color:#062212; font-weight:800; box-shadow:0 6px 14px var(--ring); transition: transform .15s ease, box-shadow .15s ease}
.btn:hover{transform: translateY(-1px); box-shadow:0 10px 22px var(--ring)}
.btn.secondary{background:transparent; color:var(--text); border:1px solid var(--border)}
.btn.ghost{background:transparent; color:var(--text); border:1px solid var(--border)}
.btn:disabled{opacity:.6; cursor:not-allowed}

.title{font-weight:900}
.lead{color:var(--muted)}

.hero{display:grid; grid-template-columns: 1.2fr .8fr; gap:26px; align-items:center; margin-top:18px}
@media (max-width: 900px){.hero{grid-template-columns:1fr}}
.hero-card{background:linear-gradient(180deg, rgba(255,255,255,.04), rgba(255,255,255,0)); border:1px solid var(--border); box-shadow:var(--shadow); padding:22px; border-radius:var(--radius)}
.hero-visual{position:relative; isolation:isolate; background:var(--panel); border:1px solid var(--border); border-radius:var(--radius); box-shadow:var(--shadow); min-block-size:260px; display:flex; align-items:center; justify-content:center}
.blob{position:absolute; inset:auto auto 10% 10%; inline-size:220px; block-size:220px; background: radial-gradient(circle at 30% 30%, var(--brand), transparent 60%); filter:blur(30px); opacity:.6; z-index:-1}

/* شريط أدوات */
.toolbar{display:flex; gap:10px; flex-wrap:wrap; align-items:center; margin:18px 0}
.search{flex:1 1 300px; display:flex; align-items:center; gap:10px; background:var(--panel); border:1px solid var(--border); padding:10px 14px; border-radius:12px}
.search input{flex:1; background:transparent; color:var(--text); border:none; outline:none}

/* شبكة البطاقات */
.grid{display:grid; grid-template-columns: repeat(3, 1fr); gap:18px}
@media (max-width: 1000px){.grid{grid-template-columns:repeat(2,1fr)}}
@media (max-width: 640px){.grid{grid-template-columns:1fr}}
.card{position:relative; display:flex; flex-direction:column; gap:10px; background:var(--card); border:1px solid var(--border); border-radius:16px; overflow:hidden; box-shadow:var(--shadow); transition:transform .18s ease; content-visibility:auto; contain-intrinsic-size:300px 420px}
.card:hover{transform: translateY(-2px)}
.thumb{block-size:120px; background:linear-gradient(135deg, rgba(34,197,94,.35), rgba(6,182,212,.35)); display:flex; align-items:center; justify-content:center; font-size:34px}
.card-body{padding:14px 14px 16px}
.meta{color:var(--muted); font-size:.95rem}

/* النافذة */
dialog{max-inline-size:min(1100px, 96vw); border:none; border-radius:20px; padding:0; overflow:hidden; box-shadow:0 20px 60px rgba(0,0,0,.5); background:var(--panel); color:var(--text)}
.modal-head{display:flex; align-items:center; justify-content:space-between; padding:16px 18px; border-bottom:1px solid var(--border)}
.modal-body{padding:0}

.flow{display:grid; grid-template-columns:280px 1fr}
@media (max-width:900px){.flow{grid-template-columns:1fr}}
.flow-sidebar{border-inline-start:1px solid transparent; border-inline-end:1px solid var(--border); padding:14px}
.flow-main{padding:14px}
.unit-list{margin:0; padding:0 18px}
.unit-list li{margin:6px 0}
.unit-list li.done{color:#22c55e}
.unit-list li.active{font-weight:800}

.section{margin:12px 0; border:1px solid var(--border); border-radius:14px; overflow:hidden}
.section-head{padding:12px 14px; background:rgba(255,255,255,.03); border-bottom:1px solid var(--border)}
.section-body{padding:14px}
iframe{width:100%; aspect-ratio:16/9; border:0; border-radius:12px}
.quiz .q{margin:10px 0}
.progress{flex:1; height:10px; border-radius:999px; background:rgba(148,163,184,.25); overflow:hidden}
.progress > span{display:block; height:100%; background:linear-gradient(90deg,#22c55e,#06b6d4)}
.nav-row{display:flex; gap:10px; align-items:center}

.close{background:transparent; border:1px solid var(--border); border-radius:10px; padding:6px 10px; cursor:pointer; color:var(--text)}

footer{margin:40px 0 60px; color:var(--muted)}
.links{display:flex; gap:14px; flex-wrap:wrap}
a{text-decoration:none; color:#67e8f9}
a:hover{text-decoration:underline}

/* تقليل المؤثرات على الجوال */
@media (max-width: 768px){
  body{ background: var(--bg); }
  .nav{ backdrop-filter:none; background:var(--panel); }
  .blob{ display:none; }
}

/* تقليل الحركة لمن يفضّل ذلك */
@media (prefers-reduced-motion: reduce){
  .btn, .card { transition:none }
}
